name = "vibes-chat-api"
main = "src/index.ts"
compatibility_date = "2024-01-01"
# Directory where Wrangler looks for D1 database migration files
migrations_dir = "migrations"

# Production (default)
[vars]
ALLOWED_ORIGIN = "https://www.vibes.run"
MAX_MESSAGES_PER_SESSION = "20"
NOTIFICATION_EMAIL = "hello@vibes.run"

[[d1_databases]]
binding = "DB"
database_name = "vibes-chat"
database_id = "3eae3419-16e3-4a98-86e4-46d8a4fe9e19"

# Staging environment
[env.staging]
name = "vibes-chat-api-staging"

[env.staging.vars]
ALLOWED_ORIGIN = "*"
MAX_MESSAGES_PER_SESSION = "20"
NOTIFICATION_EMAIL = ""

[[env.staging.d1_databases]]
binding = "DB"
database_name = "vibes-chat-staging"
database_id = "4af6d5f4-8700-4b38-aba6-041c7b5fd2bf"
